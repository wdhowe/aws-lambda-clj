# aws-lambda-clj-scheduled

This project was created based on [this blog post](https://wtfleming.github.io/blog/clojure-aws-lambda/), but modified for clj deps/tools instead of lein.

## Pre-reqs

Install Clojure and the Clojure CLI Project Tool

* [Clojure](https://gist.github.com/wdhowe/e6fc5e372b85ad8a25fdebf446b1a3e6)
* [New Project Tool](https://gist.github.com/wdhowe/99a4f463f96730002f4c20a058806dda)

Install AWS SAM

```bash
pip3 install aws-sam-cli
```

## Use

Build and Test Lambda Locally

```bash
sam build  # any change to the sam template.yaml must be re-built.
sam local invoke --event test/aws_lambda_clj_scheduled/resources/scheduled_event.json
```

Deploy to the cloud

```bash
# deploy with prompts
sam deploy --guided

# deploy with a specific aws cli credential profile and prompts
sam deploy --profile MY-AWS-PROFILE --guided

# deploy without prompts
sam deploy \
--stack-name MY-STACK-NAME \
--s3-bucket MY-BUCKET \
--capabilities CAPABILITY_AUTO_EXPAND \
--region us-west-2 \
--resolve-image-repos \
--no-fail-on-empty-changeset
```

Watching logs and deleting the deployment

```bash
sam logs --stack-name MY-STACK-NAME

sam delete --stack-name MY-STACK-NAME
```

## License

Copyright Â© 2022-2024 Bill Howe

_EPLv1.0 is just the default for projects generated by `deps-new`: you are not_
_required to open source this project, nor are you required to use EPLv1.0!_
_Feel free to remove or change the `LICENSE` file and remove or update this_
_section of the `README.md` file!_

Distributed under the Eclipse Public License version 1.0.
